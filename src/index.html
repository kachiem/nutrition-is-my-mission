<!DOCTYPE html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Test</title>
</head>

<html>

<body>
    <h1> logo </h1>
    <h2> {{ things }}! </h2>
    <img id="imagefile" alt="bananas" src="https://static1.squarespace.com/static/54e8ba93e4b07c3f655b452e/t/56c2a04520c64707756f4267/1493764650017/"
         height="200" width="300" />

    <p> <input type="file" id="pic" accept="image/*" onclick="uploadOnChange()"/> </p>
    <div id="filename"></div>

    <button onclick="sendMessage()">Nut</button></p>

    <script>
        var filename = "";
        document.getElementById('pic').onchange = uploadOnChange;

		function uploadOnChange() {
			filename = this.value;
		    //document.getElementById('pic').src = window.URL.createObjectURL(this.files[0]);
		    var lastIndex = filename.lastIndexOf("\\");
		    if (lastIndex >= 0) {
		    	filename = filename.substring(lastIndex + 1);
		    }
		    document.getElementById('filename').innerHTML = filename;
        }

        function sendMessage() {
            //alert(filename);
            $.ajax({
                type: 'POST',
                url: "./pytest.py",	//THIS MIGHT CHANGE?
                data: { param: filename },
                success: function(response) { console.log(response); alert("Success"); },
                error: function(response) { console.error(response); alert("Error"); }
            });
        }


    </script>

    <!--<input type="file"
                    onchange="document.getElementById('imagefile').src =
    window.URL.createObjectURL(this.files[0])"/>-->
    <!--<input id="textinputID" type="text" name="textinput">

    <script type="text/javascript"> function uploadPic() { $.ajax({ method: 'POST', url:
                "http://localhost:5000/script", data: {'data':
                document.getElementById('textinputID').value}, success: function(response) {
                    console.log(response)
                },
                error: function(response) { console.error(response)
                }
            });
        }

        function sendMessage() { $.ajax({ method: 'POST', url: "http://localhost:5000/script", data:
                {'data': document.getElementById('textinputID').value}, success: function(response) {
                    console.log(response)
                },
                error: function(response) { console.error(response)
                }
            });
        }


            </script>

    <button onclick="sendMessage()">Send</button> -->
</body>
</html>
